# מידע על הפרויקט - יקומות

קובץ זה מיועד למשתמש/בעל הפרויקט - מה הפרויקט, מה מצופה ממנו, מה נכשל בדרך ומה עובד טוב.

## מה זה הפרויקט?

**יקומות** הוא אתר ויקי אינטראקטיבי לפרקי הסדרה "יקומות". האתר מאפשר למשתמשים:

- לצפות בפרקי הסדרה עם נגן וידאו YouTube
- להוסיף רפרנסים (הפניות) בנקודות זמן ספציפיות בווידאו
- לאמת רפרנסים של משתמשים אחרים
- ליצור ולערוך תוכן ויקי: דמויות, תכניות, פרסומות, מושגים
- לצבור נקודות על תרומה לקהילה
- לקשר רפרנסים לדמויות ולפריטי יקום

## מה מצופה מהפרויקט?

### מטרות עיקריות:
1. **מערכת רפרנסים** - לאפשר למשתמשים להוסיף רפרנסים לפרקים ולאמת אותם
2. **ויקי תוכן** - לאפשר למשתמשים ליצור ולערוך תוכן על הדמויות והעולם של הסדרה
3. **מערכת מוניטין** - לעודד תרומה לקהילה דרך נקודות ולוח מובילים
4. **חווית משתמש ייחודית** - עיצוב רטרו עם אפקטים מיוחדים (glitch, wireframe)

### פיצ'רים עיקריים:
- ✅ נגן וידאו עם רפרנסים בנקודות זמן
- ✅ מערכת אימותים לרפרנסים
- ✅ מערכת נקודות ומוניטין
- ✅ עריכת תוכן ויקי (Markdown)
- ✅ קישור רפרנסים לדמויות ולפריטי יקום
- ✅ עיצוב רטרו ייחודי

## מה נכשל בדרך?

### פיצ'רים שלא מומשו או נמחקו:
1. **Magic Link** - קוד קיים אבל לא מומש במלואו (יש טיפול ב-URL אבל לא שליחה)
2. **התחברות עם Google** - קוד קיים אבל לא מומש במלואו
3. **מצב כיוון (Targeting Mode)** - מצב מיוחד עם crosshair להוספת רפרנסים - נמחק
4. **תמונות לרפרנסים** - אפשרות להוסיף תמונה לרפרנס - נמחק
5. **רפרנס מאומת (2+ אימותים)** - סימון מיוחד לרפרנסים מאומתים - נמחק
6. **מספר פרק** - הצגת מספר פרק - נמחק
7. **תג מאומת לדמויות** - סימון מאומת לדמויות - נמחק
8. **גריד Masonry** - גריד עם גבהים משתנים - נמחק (לא עבד טוב)
9. **אפקט parallax** - אפקט עומק על רקע - נמחק (לא מומש)
10. **טבלאות נפרדות** - היו טבלאות נפרדות לתכניות/פרסומות/מושגים, עכשיו יש טבלה מאוחדת `universe_items`

### בעיות טכניות שנפתרו:
1. **ReactPlayer - onDuration** - בעיה עם prop שלא נתמך, נפתרה על ידי הסרה ושימוש ב-`onReady`
2. **וידאו לא נטען** - נפתרה על ידי הסרת `origin` מה-config
3. **RLS Policies** - היו בעיות עם הרשאות, נפתרו על ידי עדכון המדיניות
4. **פריסה ב-Vercel** - בעיות עם משתני סביבה ו-Redirect URLs, נפתרו

### בעיות שעדיין קיימות:
1. **תמונות data URL** - תמונות נשמרות כ-data URL במקום Supabase Storage (לא אופטימלי) - יש TODO בקוד
2. **טבלאות שלא בשימוש** - `reference_links`, `edit_history`, `edit_approvals` - קיימות אבל לא בשימוש
3. **שדות שלא בשימוש** - `references.status`, `characters.links`, `universe_items.links`, `characters.verified`, `universe_items.verified`
4. **טריגרים שלא עובדים** - `update_chapters_updated_at`, `update_profiles_updated_at` (מנסים לעדכן שדות שלא קיימים)

## מה עובד טוב?

### פיצ'רים שעובדים מצוין:
1. ✅ **מערכת רפרנסים** - הוספה, עריכה, מחיקה, אימותים - הכל עובד חלק
2. ✅ **מערכת נקודות** - צבירת נקודות, לוח מובילים - עובד מצוין
3. ✅ **עריכת תוכן** - עריכת דמויות ופריטי יקום עם Markdown - עובד טוב
4. ✅ **קישור רפרנסים** - קישור רפרנסים לדמויות ולפריטי יקום - עובד
5. ✅ **נגן וידאו** - נגן YouTube עם קפיצה לרפרנסים - עובד מצוין
6. ✅ **עיצוב** - עיצוב רטרו עם אפקטים מיוחדים - נראה טוב
7. ✅ **מערכת אבטחה** - RLS Policies ובדיקות הרשאות - עובד טוב

### טכנולוגיות שעובדות טוב:
- ✅ **Next.js 16** - עובד מצוין, מהיר ויציב
- ✅ **Supabase** - מסד נתונים ואבטחה עובדים טוב
- ✅ **Tailwind CSS 4** - עיצוב מהיר ויעיל
- ✅ **TypeScript** - עוזר למנוע שגיאות

## מה צריך לשפר?

### שיפורים עתידיים:
1. **העלאת תמונות ל-Supabase Storage** - במקום data URLs
2. **ניקוי טבלאות ושדות שלא בשימוש** - למחוק או לממש
3. **תיקון טריגרים** - לתקן או למחוק טריגרים שלא עובדים
4. **שיפור חווית המשתמש** - הודעות שגיאה יותר ברורות, טעינה יותר מהירה
5. **תיעוד** - תיעוד טוב יותר של API ו-functions

## איך להשתמש בפרויקט?

ראה `DEVELOPER-GUIDE.md` למידע טכני מפורט.

### התחלה מהירה:
1. התקן תלויות: `npm install`
2. צור `.env.local` עם משתני Supabase
3. הרץ: `npm run dev`
4. פתח: `http://localhost:3000`

### הגדרת Supabase:
1. צור פרויקט ב-Supabase
2. הרץ את הסקריפטים SQL מ-`scripts/`
3. הגדר Redirect URLs ב-Supabase Dashboard
4. הוסף משתני סביבה ל-Vercel (אם מפרסים)

## סיכום

הפרויקט עובד טוב למרות כמה בעיות קטנות. המערכת יציבה, האבטחה טובה, והחוויה טובה. יש כמה דברים שצריך לנקות ולשפר, אבל הבסיס מוצק.

**סטטוס:** ✅ עובד, יציב, מוכן לשימוש

